{% extends 'base.html' %}
{% load static %}

{% block title %}โครงสร้างองค์กร - {{ SITE_NAME }}{% endblock %}

{% block content %}
<!-- Header -->
<section class="py-12 bg-primary-50">
    <div class="container mx-auto px-4">
        <nav class="mb-4 text-sm">
            <ol class="flex items-center gap-2 text-gray-500">
                <li><a href="{% url 'core:home' %}" class="hover:text-primary-500">หน้าหลัก</a></li>
                <li>/</li>
                <li><a href="{% url 'about:index' %}" class="hover:text-primary-500">เกี่ยวกับคณะ</a></li>
                <li>/</li>
                <li class="text-gray-800">โครงสร้างองค์กร</li>
            </ol>
        </nav>
        <h1 class="text-3xl font-bold text-gray-800 mb-2">โครงสร้างองค์กร</h1>
        <p class="text-gray-500">แผนผังโครงสร้างองค์กรคณะแพทยศาสตร์</p>
    </div>
</section>

<!-- Content -->
<section class="py-12">
    <div class="container mx-auto px-4">
        <div class="grid lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            {% include 'about/components/sidebar.html' %}

            <!-- Main Content -->
            <div class="lg:col-span-3" x-data="{ showModal: false }">
                <!-- Organization Chart Image -->
                <div class="bg-white rounded-2xl p-8 shadow-sm border border-gray-100 mb-8">
                    <div class="text-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">แผนผังโครงสร้างองค์กร</h2>
                        <p class="text-gray-600">คณะแพทยศาสตร์ มหาวิทยาลัยนครพนม</p>
                    </div>

                    <!-- Organization Image with Click to Expand -->
                    <div class="relative group cursor-pointer" @click="showModal = true">
                        <img
                            src="{% static 'images/about/organization.png' %}"
                            alt="แผนผังโครงสร้างองค์กร คณะแพทยศาสตร์ มหาวิทยาลัยนครพนม"
                            class="w-full h-auto rounded-xl border-2 border-gray-200 shadow-lg hover:shadow-2xl transition-all duration-300"
                        >

                        <!-- Overlay Hint -->
                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300 rounded-xl flex items-center justify-center">
                            <div class="bg-white/90 px-6 py-3 rounded-full opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 transition-all duration-300 shadow-xl">
                                <div class="flex items-center gap-2 text-gray-800 font-medium">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>
                                    </svg>
                                    <span>คลิกเพื่อขยายดู</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button
                        @click="showModal = true"
                        class="px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition inline-flex items-center gap-2 shadow-md hover:shadow-lg"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"/>
                        </svg>
                        ดูแบบเต็มหน้าจอ
                    </button>

                    <a
                        href="{% static 'images/about/organization.png' %}"
                        download="โครงสร้างองค์กร-คณะแพทยศาสตร์-มนพ.png"
                        class="px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition inline-flex items-center gap-2 shadow-md hover:shadow-lg"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        ดาวน์โหลดรูปภาพ
                    </a>
                </div>

                <!-- Fullscreen Modal -->
                <div
                    x-show="showModal"
                    x-transition:enter="transition ease-out duration-300"
                    x-transition:enter-start="opacity-0"
                    x-transition:enter-end="opacity-100"
                    x-transition:leave="transition ease-in duration-200"
                    x-transition:leave-start="opacity-100"
                    x-transition:leave-end="opacity-0"
                    @click="showModal = false"
                    class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4"
                    style="display: none;"
                >
                    <!-- Close Button -->
                    <button
                        @click="showModal = false"
                        class="absolute top-4 right-4 text-white hover:text-gray-300 transition z-10"
                    >
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>

                    <!-- Image -->
                    <div class="max-w-7xl max-h-full overflow-auto" @click.stop>
                        <img
                            src="{% static 'images/about/organization.png' %}"
                            alt="แผนผังโครงสร้างองค์กร คณะแพทยศาสตร์ มหาวิทยาลัยนครพนม"
                            class="w-auto h-auto max-w-full max-h-[90vh] rounded-lg shadow-2xl"
                        >
                    </div>

                    <!-- Download Button in Modal -->
                    <a
                        href="{% static 'images/about/organization.png' %}"
                        download="โครงสร้างองค์กร-คณะแพทยศาสตร์-มนพ.png"
                        class="absolute bottom-4 left-1/2 transform -translate-x-1/2 px-6 py-3 bg-white text-gray-800 rounded-lg hover:bg-gray-100 transition inline-flex items-center gap-2 shadow-xl"
                        @click.stop
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        ดาวน์โหลดรูปภาพ
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
